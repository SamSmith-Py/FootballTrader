<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LTD60 PAPER MODE Analysis Report</title>
    <style>
      :root {
        color-scheme: light;
      }
      body {
        margin: 0;
        font-family: "Garamond", "Book Antiqua", "Palatino Linotype", serif;
        background: linear-gradient(180deg, #f5f7fb 0%, #ffffff 45%, #f1f3f6 100%);
        color: #1d1d1f;
      }
      .page {
        max-width: 1200px;
        margin: 0 auto;
        padding: 32px 20px 48px;
      }
      h1 {
        font-size: 32px;
        margin: 0 0 16px;
        letter-spacing: 0.5px;
      }
      h2 {
        font-size: 20px;
        margin: 24px 0 10px;
        color: #2b2b2b;
      }
      th {
        cursor: pointer;
        user-select: none;
      }
      .pnl-pos {
        color: #0a7a2f;
        font-weight: 600;
      }
      .pnl-neg {
        color: #b00020;
        font-weight: 600;
      }
      .table-wrap {
        max-height: 70vh;
        overflow: auto;
        border: 1px solid #dcdfe6;
        border-radius: 10px;
        background: #ffffff;
        box-shadow: 0 8px 24px rgba(16, 24, 40, 0.08);
      }
      table.dataframe {
        width: 100%;
        border-collapse: collapse;
      }
      table.dataframe th,
      table.dataframe td {
        padding: 6px 8px;
        border: 1px solid #e5e7eb;
        text-align: right;
      }
      table.dataframe th:first-child,
      table.dataframe td:first-child {
        text-align: left;
      }
      .chart-wrap {
        width: 100%;
        overflow: hidden;
        border-radius: 12px;
        background: #ffffff;
        border: 1px solid #dcdfe6;
        box-shadow: 0 8px 24px rgba(16, 24, 40, 0.08);
        padding: 8px 12px 16px;
        position: relative;
      }
      .chart-tooltip {
        position: absolute;
        padding: 6px 8px;
        background: #1d1d1f;
        color: #ffffff;
        border-radius: 6px;
        font-size: 12px;
        font-family: "Garamond", "Book Antiqua", "Palatino Linotype", serif;
        pointer-events: none;
        white-space: nowrap;
        opacity: 0;
        transform: translate(-50%, -120%);
        transition: opacity 120ms ease;
      }
      .chart-tooltip.is-visible {
        opacity: 0.95;
      }
    </style>
  </head>
  <body>
    <div class="page">
      <h1>LTD60 PAPER MODE Analysis Report</h1>
      <h2>Competition Summary</h2>
      <div class="table-wrap">
      <table border="0" class="dataframe dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>comp</th>
      <th>matches</th>
      <th>pnl_sum</th>
      <th>pnl_avg</th>
      <th>win_rate</th>
      <th>max_drawdown</th>
      <th>max_win_streak</th>
      <th>max_loss_streak</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>English Sky Bet League 2</td>
      <td>26</td>
      <td>740.0</td>
      <td>28.46</td>
      <td>80.77</td>
      <td>-340.0</td>
      <td>9.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <td>Saudi Professional League</td>
      <td>23</td>
      <td>725.0</td>
      <td>31.52</td>
      <td>82.61</td>
      <td>-600.0</td>
      <td>9.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <td>Indonesian Super League</td>
      <td>19</td>
      <td>440.0</td>
      <td>23.16</td>
      <td>84.21</td>
      <td>-620.0</td>
      <td>9.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <td>Cypriot 1st Division</td>
      <td>10</td>
      <td>400.0</td>
      <td>40.00</td>
      <td>90.00</td>
      <td>-600.0</td>
      <td>5.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <td>Mexican Liga MX</td>
      <td>7</td>
      <td>335.0</td>
      <td>47.86</td>
      <td>85.71</td>
      <td>-265.0</td>
      <td>4.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <td>Northern Irish Premiership</td>
      <td>10</td>
      <td>250.0</td>
      <td>25.00</td>
      <td>80.00</td>
      <td>-550.0</td>
      <td>4.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <td>Malaysian Super League</td>
      <td>6</td>
      <td>200.0</td>
      <td>33.33</td>
      <td>33.33</td>
      <td>0.0</td>
      <td>2.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>English U21 Pro Development League</td>
      <td>1</td>
      <td>100.0</td>
      <td>100.00</td>
      <td>100.00</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>Portuguese Primeira Liga</td>
      <td>1</td>
      <td>100.0</td>
      <td>100.00</td>
      <td>100.00</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>French Ligue 1</td>
      <td>9</td>
      <td>75.0</td>
      <td>8.33</td>
      <td>66.67</td>
      <td>-280.0</td>
      <td>3.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <td>English National League North</td>
      <td>22</td>
      <td>-130.0</td>
      <td>-5.91</td>
      <td>72.73</td>
      <td>-1130.0</td>
      <td>7.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <td>Greek Super League</td>
      <td>3</td>
      <td>-180.0</td>
      <td>-60.00</td>
      <td>33.33</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <td>Scottish League One</td>
      <td>5</td>
      <td>-290.0</td>
      <td>-58.00</td>
      <td>60.00</td>
      <td>-490.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <td>UAE Arabian Gulf League</td>
      <td>1</td>
      <td>-290.0</td>
      <td>-290.00</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <td>English WSL</td>
      <td>1</td>
      <td>-350.0</td>
      <td>-350.00</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <td>English Sky Bet League 1</td>
      <td>36</td>
      <td>-550.0</td>
      <td>-15.28</td>
      <td>69.44</td>
      <td>-1395.0</td>
      <td>6.0</td>
      <td>2.0</td>
    </tr>
  </tbody>
</table>
      </div>
      <h2>Cumulative PnL (By Match)</h2>
      <div class="chart-wrap">
      <svg id="cum-pnl-chart" width="100%" height="360" viewBox="0 0 1000 360" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Cumulative PnL chart"><rect x="0" y="0" width="1000" height="360" fill="white" /><line x1="40" y1="40.00" x2="960" y2="40.00" stroke="#e6e6e6" /><line x1="40" y1="75.00" x2="960" y2="75.00" stroke="#e6e6e6" /><line x1="40" y1="110.00" x2="960" y2="110.00" stroke="#e6e6e6" /><line x1="40" y1="145.00" x2="960" y2="145.00" stroke="#e6e6e6" /><line x1="40" y1="180.00" x2="960" y2="180.00" stroke="#e6e6e6" /><line x1="40" y1="215.00" x2="960" y2="215.00" stroke="#e6e6e6" /><line x1="40" y1="250.00" x2="960" y2="250.00" stroke="#e6e6e6" /><line x1="40" y1="285.00" x2="960" y2="285.00" stroke="#e6e6e6" /><line x1="40" y1="320.00" x2="960" y2="320.00" stroke="#e6e6e6" /><line x1="40.00" y1="40" x2="40.00" y2="320" stroke="#e6e6e6" /><line x1="155.00" y1="40" x2="155.00" y2="320" stroke="#e6e6e6" /><line x1="270.00" y1="40" x2="270.00" y2="320" stroke="#e6e6e6" /><line x1="385.00" y1="40" x2="385.00" y2="320" stroke="#e6e6e6" /><line x1="500.00" y1="40" x2="500.00" y2="320" stroke="#e6e6e6" /><line x1="615.00" y1="40" x2="615.00" y2="320" stroke="#e6e6e6" /><line x1="730.00" y1="40" x2="730.00" y2="320" stroke="#e6e6e6" /><line x1="845.00" y1="40" x2="845.00" y2="320" stroke="#e6e6e6" /><line x1="960.00" y1="40" x2="960.00" y2="320" stroke="#e6e6e6" /><line x1="40" y1="320" x2="960" y2="320" stroke="#999" /><line x1="40" y1="40" x2="40" y2="320" stroke="#999" /><text x="32" y="44.00" text-anchor="end" font-family="Garamond, serif" font-size="11" fill="#555">1575</text><text x="32" y="100.00" text-anchor="end" font-family="Garamond, serif" font-size="11" fill="#555">1019</text><text x="32" y="156.00" text-anchor="end" font-family="Garamond, serif" font-size="11" fill="#555">463</text><text x="32" y="212.00" text-anchor="end" font-family="Garamond, serif" font-size="11" fill="#555">-93</text><text x="32" y="268.00" text-anchor="end" font-family="Garamond, serif" font-size="11" fill="#555">-649</text><text x="32" y="324.00" text-anchor="end" font-family="Garamond, serif" font-size="11" fill="#555">-1205</text><text x="40.00" y="336" text-anchor="middle" font-family="Garamond, serif" font-size="11" fill="#555">1</text><text x="224.00" y="336" text-anchor="middle" font-family="Garamond, serif" font-size="11" fill="#555">37</text><text x="408.00" y="336" text-anchor="middle" font-family="Garamond, serif" font-size="11" fill="#555">73</text><text x="592.00" y="336" text-anchor="middle" font-family="Garamond, serif" font-size="11" fill="#555">108</text><text x="776.00" y="336" text-anchor="middle" font-family="Garamond, serif" font-size="11" fill="#555">144</text><text x="960.00" y="336" text-anchor="middle" font-family="Garamond, serif" font-size="11" fill="#555">180</text><polyline id="cum-pnl-line" fill="none" stroke="#1f5fbf" stroke-width="2.5" points="40.00,188.56 45.14,214.24 50.28,276.69 55.42,266.62 60.56,256.55 65.70,246.47 70.84,236.40 75.98,226.33 81.12,216.26 86.26,206.19 91.40,196.12 96.54,186.04 101.68,216.26 106.82,206.19 111.96,230.36 117.09,220.29 122.23,210.22 127.37,200.14 132.51,190.07 137.65,180.00 142.79,169.93 147.93,159.86 153.07,149.78 158.21,175.97 163.35,165.90 168.49,155.83 173.63,183.02 178.77,172.95 183.91,199.64 189.05,189.57 194.19,179.50 199.33,169.42 204.47,159.35 209.61,219.78 214.75,209.71 219.89,199.64 225.03,189.57 230.17,219.78 235.31,246.47 240.45,236.40 245.59,272.66 250.73,298.35 255.87,288.27 261.01,278.20 266.15,268.13 271.28,258.06 276.42,247.99 281.56,237.91 286.70,227.84 291.84,254.53 296.98,244.46 302.12,234.39 307.26,263.09 312.40,253.02 317.54,242.95 322.68,232.88 327.82,259.57 332.96,249.50 338.10,239.42 343.24,264.60 348.38,254.53 353.52,284.75 358.66,274.68 363.80,299.86 368.94,289.78 374.08,314.96 379.22,304.89 384.36,294.82 389.50,320.00 394.64,309.93 399.78,299.86 404.92,289.78 410.06,279.71 415.20,269.64 420.34,259.57 425.47,249.50 430.61,239.42 435.75,229.35 440.89,219.28 446.03,247.48 451.17,280.72 456.31,270.65 461.45,260.58 466.59,250.50 471.73,240.43 476.87,230.36 482.01,220.29 487.15,210.22 492.29,200.14 497.43,190.07 502.57,180.00 507.71,169.93 512.85,159.86 517.99,189.06 523.13,178.99 528.27,203.17 533.41,193.09 538.55,183.02 543.69,214.24 548.83,204.17 553.97,194.10 559.11,184.03 564.25,173.96 569.39,163.88 574.53,153.81 579.66,143.74 584.80,133.67 589.94,158.35 595.08,148.27 600.22,138.20 605.36,128.13 610.50,168.42 615.64,158.35 620.78,148.27 625.92,178.49 631.06,168.42 636.20,228.85 641.34,218.78 646.48,208.71 651.62,198.63 656.76,188.56 661.90,168.42 667.04,198.63 672.18,188.56 677.32,178.49 682.46,168.42 687.60,158.35 692.74,186.55 697.88,176.47 703.02,166.40 708.16,156.33 713.30,146.26 718.44,146.26 723.58,136.19 728.72,164.89 733.85,154.82 738.99,144.75 744.13,134.68 749.27,134.68 754.41,124.60 759.55,114.53 764.69,104.46 769.83,94.39 774.97,94.39 780.11,84.32 785.25,74.24 790.39,100.94 795.53,90.86 800.67,80.79 805.81,70.72 810.95,70.72 816.09,60.65 821.23,50.58 826.37,85.83 831.51,85.83 836.65,75.76 841.79,65.68 846.93,95.90 852.07,85.83 857.21,75.76 862.35,65.68 867.49,98.92 872.63,88.85 877.77,78.78 882.91,103.45 888.04,131.65 893.18,160.86 898.32,140.72 903.46,130.65 908.60,130.65 913.74,120.58 918.88,110.50 924.02,100.43 929.16,90.36 934.30,80.29 939.44,70.22 944.58,60.14 949.72,50.07 954.86,40.00 960.00,40.00" /><circle id="cum-pnl-marker" r="4.5" fill="#1f5fbf" stroke="#ffffff" stroke-width="2" opacity="0" /><text x="500.00" y="354" text-anchor="middle" font-family="Garamond, serif" font-size="12" fill="#333">Match Number</text><text x="12" y="180.00" text-anchor="middle" transform="rotate(-90, 12, 180.00)" font-family="Garamond, serif" font-size="12" fill="#333">Cumulative PnL</text><rect x="46" y="16" width="150" height="22" fill="#fff" stroke="#ddd" /><line x1="54" y1="27" x2="82" y2="27" stroke="#1f5fbf" stroke-width="2.5" /><text x="90" y="31" font-family="Garamond, serif" font-size="12" fill="#333">Cumulative PnL</text></svg>
      <div id="cum-pnl-tooltip" class="chart-tooltip" role="status" aria-live="polite"></div>
      </div>
      <h2>Overall Summary</h2>
      <div class="table-wrap">
      <table border="0" class="dataframe dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>matches</th>
      <th>ltd60_pnl_sum</th>
      <th>win_rate</th>
      <th>max_drawdown</th>
      <th>max_win_streak</th>
      <th>max_loss_streak</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>180</td>
      <td>1575.0</td>
      <td>74.44</td>
      <td>-1495.0</td>
      <td>14.0</td>
      <td>4.0</td>
    </tr>
  </tbody>
</table>
      </div>
    </div>
    <script>
      (function () {
        const table = document.querySelector("table.dataframe");
        if (!table) return;

        const headerCells = Array.from(table.querySelectorAll("thead th"));
        const pnlIndex = headerCells.findIndex((th) => th.textContent.trim() === "pnl_sum");

        if (pnlIndex >= 0) {
          const rows = Array.from(table.querySelectorAll("tbody tr"));
          rows.forEach((row) => {
            const cell = row.children[pnlIndex];
            if (!cell) return;
            const val = parseFloat(cell.textContent);
            if (Number.isNaN(val)) return;
            cell.classList.add(val >= 0 ? "pnl-pos" : "pnl-neg");
          });
        }

        function parseCell(cell) {
          const text = cell.textContent.trim();
          const num = parseFloat(text);
          return Number.isNaN(num) ? text.toLowerCase() : num;
        }

        function sortTable(colIndex, dir) {
          const tbody = table.querySelector("tbody");
          const rows = Array.from(tbody.querySelectorAll("tr"));
          rows.sort((a, b) => {
            const aVal = parseCell(a.children[colIndex]);
            const bVal = parseCell(b.children[colIndex]);
            if (aVal < bVal) return dir === "asc" ? -1 : 1;
            if (aVal > bVal) return dir === "asc" ? 1 : -1;
            return 0;
          });
          rows.forEach((row) => tbody.appendChild(row));
        }

        headerCells.forEach((th, idx) => {
          th.addEventListener("click", () => {
            const current = th.getAttribute("data-sort-dir") || "desc";
            const next = current === "asc" ? "desc" : "asc";
            headerCells.forEach((h) => h.removeAttribute("data-sort-dir"));
            th.setAttribute("data-sort-dir", next);
            sortTable(idx, next);
          });
        });

        const svg = document.getElementById("cum-pnl-chart");
        const line = document.getElementById("cum-pnl-line");
        const marker = document.getElementById("cum-pnl-marker");
        const tooltip = document.getElementById("cum-pnl-tooltip");

        if (svg && line && marker && tooltip) {
          const points = line
            .getAttribute("points")
            .trim()
            .split(/\s+/)
            .map((pair) => {
              const [x, y] = pair.split(",").map(Number);
              return { x, y };
            });

          const viewBox = svg.viewBox.baseVal;
          const yAxisLabels = Array.from(svg.querySelectorAll("text"))
            .map((textNode) => {
              const text = textNode.textContent.trim();
              const value = parseFloat(text);
              const y = parseFloat(textNode.getAttribute("y"));
              const x = parseFloat(textNode.getAttribute("x"));
              if (Number.isNaN(value) || Number.isNaN(y) || Number.isNaN(x)) return null;
              if (x !== 32) return null;
              return { y, value };
            })
            .filter(Boolean)
            .sort((a, b) => a.y - b.y);

          const scaleFromYAxis = () => {
            if (yAxisLabels.length < 2) return null;
            const top = yAxisLabels[0];
            const bottom = yAxisLabels[yAxisLabels.length - 1];
            const m = (bottom.value - top.value) / (bottom.y - top.y);
            const b = top.value - m * top.y;
            return (y) => m * y + b;
          };

          const yToPnl = scaleFromYAxis();
          const chartWrap = svg.closest(".chart-wrap");
          const updateHover = (evt) => {
            const rect = svg.getBoundingClientRect();
            const wrapRect = chartWrap ? chartWrap.getBoundingClientRect() : rect;
            const scaleX = viewBox.width / rect.width;
            const scaleY = viewBox.height / rect.height;
            const mouseX = (evt.clientX - rect.left) * scaleX + viewBox.x;
            const mouseY = (evt.clientY - rect.top) * scaleY + viewBox.y;

            let nearestIndex = 0;
            let nearestDist = Infinity;
            points.forEach((pt, idx) => {
              const dx = pt.x - mouseX;
              const dy = pt.y - mouseY;
              const dist = dx * dx + dy * dy;
              if (dist < nearestDist) {
                nearestDist = dist;
                nearestIndex = idx;
              }
            });

            const nearest = points[nearestIndex];
            marker.setAttribute("cx", nearest.x);
            marker.setAttribute("cy", nearest.y);
            marker.setAttribute("opacity", "1");

            const pnlValue = yToPnl ? yToPnl(nearest.y) : null;
            const pnlText = pnlValue === null ? "n/a" : pnlValue.toFixed(2);
            tooltip.textContent = `Match ${nearestIndex + 1} â€¢ PnL ${pnlText}`;

            const tooltipX = ((nearest.x - viewBox.x) / viewBox.width) * rect.width;
            const tooltipY = ((nearest.y - viewBox.y) / viewBox.height) * rect.height;
            tooltip.style.left = `${tooltipX + (rect.left - wrapRect.left)}px`;
            tooltip.style.top = `${tooltipY + (rect.top - wrapRect.top)}px`;
            tooltip.classList.add("is-visible");
          };

          const clearHover = () => {
            marker.setAttribute("opacity", "0");
            tooltip.classList.remove("is-visible");
          };

          svg.addEventListener("mousemove", updateHover);
          svg.addEventListener("mouseleave", clearHover);
        }
      })();
    </script>
  </body>
</html>
